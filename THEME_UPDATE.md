# 自适应主题功能 - 更新说明

## 📅 版本 v1.0.1 (2025-10-25)

### 🎨 新功能：自适应页面色调

WordGet 现在可以智能检测当前页面的配色方案，并自动调整侧边栏的主题色彩，让扩展完美融入您正在浏览的网站！

## ✨ 主要特性

### 1. 智能色彩检测
- 🔍 自动分析页面的主导颜色
- 🎯 提取最多3种特征色作为主题色
- 🌓 智能识别深色/浅色模式
- 🎨 过滤灰度色，保留有彩色

### 2. 动态主题适配
- **主色调** - 用于标题栏渐变
- **次色调** - 用于按钮和链接
- **强调色** - 用于成功提示
- **深浅模式** - 文字、背景、阴影全面适配

### 3. 使用体验
- ✅ 默认开启，即刻体验
- ⚙️ 可在设置中关闭
- 🔄 每次打开侧边栏自动检测
- 💾 主题设置自动保存

## 🚀 如何使用

### 快速体验

1. **重新加载扩展**
   - 打开 `chrome://extensions/`
   - 找到 WordGet
   - 点击刷新按钮 🔄

2. **访问不同风格的网站测试**
   - **深色网站**: GitHub (深色模式)、YouTube (深色)
   - **浅色网站**: Google、Wikipedia
   - **彩色网站**: Dribbble、Behance

3. **打开侧边栏**
   - 点击扩展图标
   - 或按 `Ctrl+Shift+S` 保存单词
   - 观察侧边栏色彩的变化 🎨

### 设置选项

**开启/关闭自适应主题**:
1. 点击扩展图标打开侧边栏
2. 点击右上角设置按钮 ⚙️
3. 找到"自适应页面色调"选项
4. 勾选/取消勾选即可

## 📝 更新的文件

### 核心功能文件
- ✅ `background.js` - 添加主题检测逻辑
- ✅ `sidebar.js` - 添加主题应用功能
- ✅ `sidebar.html` - 添加设置选项
- ✅ `manifest.json` - 添加 `scripting` 权限，版本升级到 v1.0.1

### 新增文件
- ✅ `theme-adapter.js` - 主题适配器（独立模块，未来可扩展）
- ✅ `ADAPTIVE_THEME.md` - 详细功能文档

### 文档更新
- ✅ `README.md` - 添加自适应主题说明
- ✅ `THEME_UPDATE.md` - 本更新说明

## 🔧 技术实现

### 主题检测流程
```
打开侧边栏 
  ↓
注入脚本到页面
  ↓
采样页面元素（100个）
  ↓
提取颜色（背景、文字、边框）
  ↓
统计颜色频率
  ↓
过滤灰度色
  ↓
选择前3种主导色
  ↓
检测页面亮度
  ↓
生成主题配置
  ↓
应用到侧边栏CSS
```

### 使用的API
- `chrome.scripting.executeScript` - 在页面中执行颜色检测
- `chrome.storage.local` - 保存主题设置和检测结果
- `chrome.runtime.sendMessage` - 通知侧边栏应用主题
- CSS Variables - 动态更新样式

### 性能优化
- ⚡ 采样策略：最多100个元素
- ⚡ 检测时间：< 100ms
- ⚡ CPU占用：极低
- ⚡ 不影响页面性能

## 🎯 示例效果

### 深色网站 (GitHub Dark)
```
页面背景: #0d1117 (深色)
→ 侧边栏: 深色模式
→ 主色: 蓝色调 (#58a6ff)
→ 文字: 浅色 (#e8e8e8)
```

### 浅色网站 (Google)
```
页面背景: #ffffff (浅色)
→ 侧边栏: 浅色模式
→ 主色: 蓝色调 (#4285f4)
→ 文字: 深色 (#1a1a1a)
```

### 彩色网站 (Dribbble)
```
主色调: 粉红色 (#ea4c89)
→ 侧边栏: 粉红渐变
→ 次色: 紫色
→ 强调色: 橙色
```

## 🐛 故障排除

### 主题没有改变？
1. 确保"自适应页面色调"已启用
2. 刷新页面后重新打开侧边栏
3. 某些特殊页面（如 chrome:// 页面）不支持

### 颜色不准确？
- 页面可能使用大量图片
- 等待页面完全加载后再打开
- 可以禁用自适应，使用默认主题

### 深浅模式判断错误？
- 页面背景可能是透明的
- 建议在设置中关闭自适应主题

## 📖 详细文档

想了解更多技术细节和使用技巧？

查看完整文档: [ADAPTIVE_THEME.md](ADAPTIVE_THEME.md)

包含内容：
- 详细的工作原理
- 颜色检测算法
- CSS变量系统
- 自定义与扩展
- 最佳实践
- 更多示例

## 🔄 后续计划

未来可能添加的功能：
- [ ] 用户自定义主题颜色
- [ ] 主题预设库（精选配色方案）
- [ ] 更多配色算法（如互补色、类似色）
- [ ] 主题历史记录
- [ ] 导出/导入主题配置

## 💡 反馈建议

如果您有任何想法或发现问题：
- 🐛 报告 Bug
- 💡 功能建议
- 🎨 分享您的主题效果

请访问: https://github.com/TTAWDTT/WordGet/issues

---

**立即体验，让 WordGet 融入您喜爱的每个网站！** 🎨✨
