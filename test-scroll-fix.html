<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ»šåŠ¨ä¿®å¤æ¼”ç¤º - WordGet</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 40px;
      line-height: 1.8;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .section {
      margin-bottom: 60px;
      padding: 30px;
      background: #f9f9f9;
      border-radius: 8px;
      min-height: 400px;
    }
    
    .section h2 {
      color: #667eea;
      margin-bottom: 20px;
    }
    
    .test-text {
      background: linear-gradient(120deg, #fef5e7 0%, #fef5e7 100%);
      padding: 4px 8px;
      border-radius: 4px;
      font-weight: 500;
      cursor: pointer;
    }
    
    .test-text:hover {
      background: linear-gradient(120deg, #fce4a7 0%, #fce4a7 100%);
    }
    
    .instructions {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 20px;
      margin-bottom: 30px;
      border-radius: 4px;
    }
    
    .instructions h3 {
      margin-top: 0;
      color: #1976d2;
    }
    
    .demo-tooltip {
      position: fixed;
      background: white;
      border: 1px solid #e0e0e0;
      border-left: 3px solid #667eea;
      border-radius: 8px;
      padding: 12px 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      z-index: 999999;
      display: none;
      max-width: 400px;
    }
    
    .demo-tooltip.visible {
      display: block;
    }
    
    .demo-tooltip .word {
      font-weight: 600;
      font-size: 16px;
      color: #48bb78;
      margin-bottom: 8px;
    }
    
    .demo-tooltip .translation {
      color: #667eea;
      font-size: 14px;
    }
    
    .scroll-indicator {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #667eea;
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 14px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="instructions">
      <h3>ğŸ“– æµ‹è¯•è¯´æ˜</h3>
      <p><strong>æµ‹è¯•ç›®æ ‡ï¼š</strong>éªŒè¯æ»šåŠ¨æ—¶æç¤ºæ¡†ä½ç½®åŒæ­¥æ›´æ–°</p>
      <ol>
        <li>ç‚¹å‡»ä¸‹æ–¹é«˜äº®çš„è‹±æ–‡æ–‡æœ¬</li>
        <li>ä¼šå‡ºç°ä¸€ä¸ªæ¨¡æ‹Ÿçš„ç¿»è¯‘æç¤ºæ¡†</li>
        <li>æ»šåŠ¨é¡µé¢</li>
        <li>è§‚å¯Ÿæç¤ºæ¡†æ˜¯å¦éšç€æ»šåŠ¨åŒæ­¥ç§»åŠ¨</li>
        <li>æç¤ºæ¡†åº”è¯¥ä¿æŒä¸è¢«ç‚¹å‡»æ–‡æœ¬çš„ç›¸å¯¹ä½ç½®</li>
      </ol>
      <p><strong>é¢„æœŸæ•ˆæœï¼š</strong>æ»šåŠ¨æ—¶ï¼Œæç¤ºæ¡†åº”è¯¥åƒ"å›ºå®š"åœ¨æ–‡æœ¬ä¸Šä¸€æ ·éšä¹‹ç§»åŠ¨</p>
    </div>
    
    <div class="section">
      <h2>Section 1 - é¡µé¢é¡¶éƒ¨</h2>
      <p>
        This is a <span class="test-text" data-word="demonstration">demonstration</span> of the scroll synchronization fix.
        When you click on highlighted words, a tooltip will appear. Try scrolling the page and see if the
        <span class="test-text" data-word="tooltip">tooltip</span> moves with the content.
      </p>
      <p>
        The <span class="test-text" data-word="implementation">implementation</span> tracks the original position
        and scroll offset, then adjusts the tooltip position based on the scroll delta.
      </p>
    </div>
    
    <div class="section">
      <h2>Section 2 - é¡µé¢ä¸­éƒ¨</h2>
      <p>
        Machine learning is a <span class="test-text" data-word="revolutionary">revolutionary</span> technology
        that enables computers to learn from data. Deep learning uses
        <span class="test-text" data-word="neural networks">neural networks</span> with multiple layers.
      </p>
      <p>
        The <span class="test-text" data-word="architecture">architecture</span> of these systems is highly
        sophisticated and requires careful design and <span class="test-text" data-word="optimization">optimization</span>.
      </p>
    </div>
    
    <div class="section">
      <h2>Section 3 - é¡µé¢ä¸‹éƒ¨</h2>
      <p>
        Natural language <span class="test-text" data-word="processing">processing</span> enables computers to
        understand human language. This <span class="test-text" data-word="technology">technology</span> has
        applications in translation, sentiment analysis, and more.
      </p>
      <p>
        The future of AI holds <span class="test-text" data-word="tremendous">tremendous</span> potential for
        solving complex problems and improving human life.
      </p>
    </div>
    
    <div class="section">
      <h2>Section 4 - æœ€åº•éƒ¨æµ‹è¯•åŒº</h2>
      <p>
        This final section tests the <span class="test-text" data-word="behavior">behavior</span> at the bottom
        of the page. The tooltip should handle <span class="test-text" data-word="boundary">boundary</span>
        conditions gracefully.
      </p>
      <p>
        Even when scrolling near page <span class="test-text" data-word="edges">edges</span>, the positioning
        should remain <span class="test-text" data-word="accurate">accurate</span> and visually appealing.
      </p>
    </div>
  </div>
  
  <div id="demo-tooltip" class="demo-tooltip">
    <div class="word" id="tooltip-word"></div>
    <div class="translation" id="tooltip-translation"></div>
  </div>
  
  <div class="scroll-indicator" id="scroll-indicator">æ»šåŠ¨ä½ç½®: 0%</div>
  
  <script>
    // æ¨¡æ‹Ÿ tooltip-ui.js çš„æ»šåŠ¨åŒæ­¥é€»è¾‘
    class DemoTooltip {
      constructor() {
        this.tooltip = document.getElementById('demo-tooltip');
        this.originalX = 0;
        this.originalY = 0;
        this.scrollX = 0;
        this.scrollY = 0;
        this.scrollHandler = this.handleScroll.bind(this);
      }
      
      show(word, translation, x, y) {
        // å­˜å‚¨åŸå§‹ä½ç½®å’Œæ»šåŠ¨åç§»
        this.originalX = x;
        this.originalY = y;
        this.scrollX = window.scrollX || window.pageXOffset;
        this.scrollY = window.scrollY || window.pageYOffset;
        
        // æ›´æ–°å†…å®¹
        document.getElementById('tooltip-word').textContent = word;
        document.getElementById('tooltip-translation').textContent = `ç¿»è¯‘: ${translation}`;
        
        // æ˜¾ç¤ºå¹¶å®šä½
        this.updatePosition(x, y);
        this.tooltip.classList.add('visible');
        
        // æ·»åŠ æ»šåŠ¨ç›‘å¬
        window.addEventListener('scroll', this.scrollHandler, true);
      }
      
      hide() {
        this.tooltip.classList.remove('visible');
        window.removeEventListener('scroll', this.scrollHandler, true);
      }
      
      handleScroll() {
        // è®¡ç®—æ»šåŠ¨åç§»é‡
        const currentScrollX = window.scrollX || window.pageXOffset;
        const currentScrollY = window.scrollY || window.pageYOffset;
        
        const deltaX = currentScrollX - this.scrollX;
        const deltaY = currentScrollY - this.scrollY;
        
        // è°ƒæ•´ä½ç½®ï¼ˆä¸å®é™…çš„ tooltip-ui.js ç›¸åŒçš„é€»è¾‘ï¼‰
        const adjustedX = this.originalX - deltaX;
        const adjustedY = this.originalY - deltaY;
        
        this.updatePosition(adjustedX, adjustedY);
      }
      
      updatePosition(x, y) {
        // è·å–æç¤ºæ¡†å°ºå¯¸
        this.tooltip.offsetHeight; // å¼ºåˆ¶é‡æ’
        const rect = this.tooltip.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        // è®¡ç®—ä½ç½®ï¼ˆé»˜è®¤å³ä¸‹æ–¹ï¼‰
        let left = x + 15;
        let top = y + 15;
        
        // è¾¹ç•Œæ£€æµ‹
        if (left + rect.width > viewportWidth - 10) {
          left = x - rect.width - 15;
        }
        if (top + rect.height > viewportHeight - 10) {
          top = y - rect.height - 15;
        }
        if (left < 10) left = 10;
        if (top < 10) top = 10;
        
        // åº”ç”¨ä½ç½®
        this.tooltip.style.left = `${left}px`;
        this.tooltip.style.top = `${top}px`;
      }
    }
    
    // åˆ›å»º tooltip å®ä¾‹
    const tooltip = new DemoTooltip();
    
    // ç®€å•çš„ç¿»è¯‘å­—å…¸
    const translations = {
      'demonstration': 'æ¼”ç¤º',
      'tooltip': 'æç¤ºæ¡†',
      'implementation': 'å®ç°',
      'revolutionary': 'é©å‘½æ€§çš„',
      'neural networks': 'ç¥ç»ç½‘ç»œ',
      'architecture': 'æ¶æ„',
      'optimization': 'ä¼˜åŒ–',
      'processing': 'å¤„ç†',
      'technology': 'æŠ€æœ¯',
      'tremendous': 'å·¨å¤§çš„',
      'behavior': 'è¡Œä¸º',
      'boundary': 'è¾¹ç•Œ',
      'edges': 'è¾¹ç¼˜',
      'accurate': 'å‡†ç¡®çš„'
    };
    
    // ä¸ºæ‰€æœ‰æµ‹è¯•æ–‡æœ¬æ·»åŠ ç‚¹å‡»äº‹ä»¶
    document.querySelectorAll('.test-text').forEach(element => {
      element.addEventListener('click', (e) => {
        const word = element.dataset.word;
        const translation = translations[word] || 'æœªçŸ¥';
        const x = e.clientX;
        const y = e.clientY;
        
        tooltip.show(word, translation, x, y);
      });
    });
    
    // ç‚¹å‡»å…¶ä»–åœ°æ–¹éšè— tooltip
    document.addEventListener('click', (e) => {
      if (!e.target.classList.contains('test-text') && 
          !document.getElementById('demo-tooltip').contains(e.target)) {
        tooltip.hide();
      }
    });
    
    // æ›´æ–°æ»šåŠ¨æŒ‡ç¤ºå™¨
    window.addEventListener('scroll', () => {
      const scrollPercent = Math.round(
        (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100
      );
      document.getElementById('scroll-indicator').textContent = `æ»šåŠ¨ä½ç½®: ${scrollPercent}%`;
    });
    
    console.log('%cæ»šåŠ¨ä¿®å¤æ¼”ç¤ºé¡µé¢å·²åŠ è½½', 'color: #667eea; font-size: 16px; font-weight: bold;');
    console.log('ç‚¹å‡»é«˜äº®æ–‡æœ¬æŸ¥çœ‹æç¤ºæ¡†ï¼Œç„¶åæ»šåŠ¨é¡µé¢æµ‹è¯•åŒæ­¥æ•ˆæœ');
  </script>
</body>
</html>
